window.Yikes_Mailchimp_Ajax=window.Yikes_Mailchimp_Ajax||{};(function(c,a,d,f,e){f.l10n=c.yikes_mailchimp_ajax||{};d(a).ready(function(){var g=d("body");g.on("submit",".yikes-easy-mc-form",function(){var i=d(this);i.addClass("yikes-mc-submitted-form-loading");i.find("input, label, button").not(":hidden").fadeTo("fast",0.5);if(typeof f.l10n.preloader_url==="string"&&f.l10n.preloader_url.length>1){i.append('<img src="'+f.l10n.preloader_url+'" class="yikes-mailchimp-preloader" />')}d(".yikes-mc-required-field-not-filled").removeClass("yikes-mc-required-field-not-filled");d(".yikes-mailchimp-submit-button-span-text").hide();if(typeof f.l10n.loading_dots==="string"&&f.l10n.loading_dots.length>1){i.find(".yikes-easy-mc-submit-button").append('<img src="'+f.l10n.loading_dots+'" class="loading-dots yikes-mc-loading-dots" />')}var h=i.attr("data-attr-form-id");var l=[];if(i.find(".yikes-interest-group-required").length>0){i.find(".yikes-interest-group-required").each(function(){var o=jQuery(this).attr("name");var n=o.replace("[]","");if(i.find('input[name="'+n+'[]"]:checked').length==0){l[n]=i.find("span."+n+"-label").text()}})}var j=true;if(typeof(yikes_mailchimp_custom_validation)==="function"){var j=yikes_mailchimp_custom_validation(i)}if(l.length>0||!j){if(i.find(".yikes-mailchimp-required-interest-group-error").length>0){i.find(".yikes-mailchimp-required-interest-group-error").fadeOut("fast",function(){i.find(".yikes-mailchimp-required-interest-group-error").remove();for(var n in l){i.find("span."+n+"-label").after('<p class="yikes-mailchimp-required-interest-group-error">'+f.l10n.interest_group_checkbox_error+"</p>")}})}else{for(var k in l){i.find("span."+k+"-label").after('<p class="yikes-mailchimp-required-interest-group-error">'+f.l10n.interest_group_checkbox_error+"</p>")}}i.find(".yikes-easy-mc-submit-button").removeAttr("disabled","disabled");i.find("input, label, button").not(":hidden").fadeTo("fast",1);i.find(".yikes-mailchimp-preloader").remove();d(".yikes-mc-loading-dots").remove();d(".yikes-mailchimp-submit-button-span-text").show();i.removeClass("yikes-mc-submitted-form-loading");return false}i.find(".yikes-easy-mc-submit-button").attr("disabled","disabled");d(".yikes-easy-mc-error-message").remove();d(".yikes-easy-mc-success-message").remove();var m={action:"process_form_submission",form_data:i.serialize(),form_id:h,page_data:f.l10n.page_data,ajax_security_nonce:f.l10n.ajax_security_nonce};d.ajax({url:f.l10n.ajax_url,type:"POST",data:m,success:function(q,n,w){i.find("input, label, button").not(":hidden").fadeTo("fast",1);i.find(".yikes-mailchimp-preloader").remove();d(".yikes-mc-loading-dots").remove();d(".yikes-mailchimp-submit-button-span-text").show();i.removeClass("yikes-mc-submitted-form-loading");i.trigger("yikes_mailchimp_ajax_submission",q);if(q.success){q=q.data;if(typeof(yikes_mailchimp_google_analytics_success)==="function"){yikes_mailchimp_google_analytics_success(q)}if(q.hide==1){if(d(".yikes-easy-mc-form-description-"+h).length>0){d(".yikes-easy-mc-form-description-"+h).hide()}i.hide()}var t='<p class="yikes-easy-mc-success-message yikes-easy-mc-success-message-'+h+' yikes-easy-mc-hidden">'+q.response+"</p>";var p=d(".yikes-easy-mc-form-description-"+h).length>0?d(".yikes-easy-mc-form-description-"+h):i;if(f.l10n.feedback_message_placement==="before"){p.before(t)}else{if(f.l10n.feedback_message_placement==="after"){i.after(t)}else{if(f.l10n.feedback_message_placement==="both"){p.before(t);i.after(t)}}}d(".yikes-easy-mc-success-message-"+h).fadeIn();d(".yikes-mailchimp-required-interest-group-error").remove();if(q.redirection===1){yikes_mc_redirect_after_submission(q.redirect,q.redirect_timer,q.new_window)}i.trigger("yikes_clear_input_fields_after_successful_submission");i.find("input").not('.yikes-easy-mc-submit-button, input[type="radio"], input[type="select"], input[type="checkbox"], input[name="yikes-mailchimp-associated-list-id"], input[name="yikes-mailchimp-submitted-form"]').val("");var v={action:"increase_submission_count",form_id:h};d.ajax({url:f.l10n.ajax_url,type:"POST",data:v,success:function(y,A,z){},error:function(y,A,z){console.error(z)}})}else{q=q.data;if(typeof(yikes_mailchimp_google_analytics_failure)==="function"){yikes_mailchimp_google_analytics_failure(q)}var s=typeof q!=="undefined"&&typeof q.response!=="undefined"?q.response:"Error collecting the API response.";var o='<p class="yikes-easy-mc-error-message yikes-easy-mc-error-message-'+h+' yikes-easy-mc-hidden">'+s+"</p>";var r=d(".yikes-easy-mc-form-description-"+h).length>0?d(".yikes-easy-mc-form-description-"+h):i;if(f.l10n.feedback_message_placement==="before"){r.before(o)}else{if(f.l10n.feedback_message_placement==="after"){i.after(o)}else{if(f.l10n.feedback_message_placement==="both"){r.before(o);i.after(o)}}}if(typeof(q)!=="undefined"&&typeof(q.missing_required_field)!=="undefined"&&q.missing_required_field===true){if(typeof(q.missing_required_field_data)!=="undefined"){var u=q.missing_required_field_data;var x=(typeof(q.is_interest_group)!=="undefined")?q.is_interest_group:false;b(u,x)}}d(".yikes-easy-mc-error-message").fadeIn()}},error:function(n,p,o){console.error(o);console.log(n);console.log(p)},complete:function(n,o){i.find(".yikes-easy-mc-submit-button").removeAttr("disabled","disabled")}});return false})});function b(h,g){if(typeof(h)!=="undefined"){d.each(h,function(i,j){if(g===true){if(d("span."+i+"-label").length>0){d("span."+i+"-label").addClass("yikes-mc-required-field-not-filled")}else{d("."+i+"-label").addClass("yikes-mc-required-field-not-filled")}}else{d('label[for="'+i+'"]').children("input").addClass("yikes-mc-required-field-not-filled")}})}}})(window,document,jQuery,Yikes_Mailchimp_Ajax);